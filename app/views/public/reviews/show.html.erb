<div class="container my-4 px-md-0">
  <div class="col-8 col-sm-5 col-md-4 col-lg-3 col-xl-2 px-1 ml-md-2">
    <h5 class="text-center ml-md-5 text-nowrap">レビュー詳細</h5>
  </div>
  
  <table class='table table-hover table-inverse'>
    <thead>
      <tr>
        <td></td>
        <td>タイトル</td>
        <td>著者</td>
        <td>レビュー投稿者</td>
      </tr>
     </thead>
     <tbody>
       <tr>
         <td><%=image_tag(@review.book.small_image_url, class: "book-image") %></td>
         <td><%= @review.book.title %></td>
         <td><%= @review.book.author %></td>
         <td><%= @review.customer.nickname %></td>
       </tr>
     </tbody>
  </table>
  
  <div class="row mr-5">
    <%= form_with model:@review, local: true do |f| %>
    <table class="table table-borderless">
      <tr>
        <th style="font-size:20px;">星：</th>
        <td>
          <div id="star_<%= @review.id %>"></div>
          <script>
          $(document).on('turbolinks:load', function() {
            let elem = document.querySelector('#star_<%= @review.id %>');
            if (elem == null) return;
            
            elem.innerHTML = "";
              let opt = {  
                starOn: "<%= asset_path('star-on.png') %>",
                starOff: "<%= asset_path('star-off.png') %>",
                starHalf: "<%= asset_path('star-half.png') %>",
                score: "<%= @review.star %>",
                readOnly: true,
              };
              raty(elem, opt);
            });
          </script>
        </td>
      </tr>
      <tr>
        <th style="font-size:20px;">感想：</th>
        <td style="font-size:18px;"><%= @review.impression %></td>
      </tr>
      <tr>
        <th style="font-size:20px;">活かしたいこと：</th>
        <td style="font-size:18px;"><%= @review.action%></td>
      </tr>
      <tr>
        <% if @review.customer == current_customer %>
        <th>
          <td><%= link_to "編集", edit_review_path, class: "btn btn-success col-sm-5 font-weight-bold" %></td>
          <td><%= link_to "削除", review_path, method: :delete, data: { confirm: "本当に削除しますか？" }, class: 'col-sm-12 mx-0  btn btn-danger font-weight-bold'  %></td>
        </th>
        <%end%>
    </table>
    <% end %>
  </div>
</div>
